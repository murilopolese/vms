parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"psEw":[function(require,module,exports) {
function e(e,o){if(e)try{var t=document.querySelector(e);t&&t.scrollIntoView(o)}catch(c){}}module.exports=e;
},{}],"QKPX":[function(require,module,exports) {
"use strict";function e(e){if("undefined"==typeof document)throw new Error("document-ready only runs in the browser");var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})}module.exports=e;
},{}],"dqTS":[function(require,module,exports) {
function o(o,n,r){t(o==n,r)}function n(o,n,r){t(o!=n,r)}function r(o,n){t(!o,n)}function t(o,n){if(!o)throw new Error(n||"AssertionError")}t.notEqual=n,t.notOk=r,t.equal=o,t.ok=t,module.exports=t;
},{}],"jje8":[function(require,module,exports) {
var e=require("assert"),t="undefined"!=typeof window;function n(){var e;return t?(window._nanoScheduler||(window._nanoScheduler=new i(!0)),e=window._nanoScheduler):e=new i,e}function i(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}i.prototype.push=function(t){e.equal(typeof t,"function","nanoscheduler.push: cb should be type function"),this.queue.push(t),this.schedule()},i.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method(function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()})}},i.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})},module.exports=n;
},{"assert":"dqTS"}],"zdkD":[function(require,module,exports) {
var r,e=require("nanoscheduler")(),a=require("assert");n.disabled=!0;try{r=window.performance,n.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(i){}function n(u){if(a.equal(typeof u,"string","nanotiming: name should be type string"),n.disabled)return t;var o=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,s="start-"+o+"-"+u;function c(a){var n="end-"+o+"-"+u;r.mark(n),e.push(function(){var e=null;try{var t=u+" ["+o+"]";r.measure(t,s,n),r.clearMarks(s),r.clearMarks(n)}catch(i){e=i}a&&a(e,u)})}return r.mark(s),c.uuid=o,c}function t(r){r&&e.push(function(){r(new Error("nanotiming: performance API unavailable"))})}module.exports=n;
},{"nanoscheduler":"jje8","assert":"dqTS"}],"Lphv":[function(require,module,exports) {
var e=require("assert");function n(){if(!(this instanceof n))return new n;this.trie={nodes:{}}}function t(e,n){return Object.prototype.hasOwnProperty.call(e,n)}module.exports=n,n.prototype.create=function(n){e.equal(typeof n,"string","route should be a string");var r=n.replace(/^\//,"").split("/");return function e(n,o){var s=t(r,n)&&r[n];if(!1===s)return o;var i=null;return/^:|^\*/.test(s)?(t(o.nodes,"$$")?i=o.nodes.$$:(i={nodes:{}},o.nodes.$$=i),"*"===s[0]&&(o.wildcard=!0),o.name=s.replace(/^:|^\*/,"")):t(o.nodes,s)?i=o.nodes[s]:(i={nodes:{}},o.nodes[s]=i),e(n+1,i)}(0,this.trie)},n.prototype.match=function(n){e.equal(typeof n,"string","route should be a string");var r=n.replace(/^\//,"").split("/"),o={};var s=function e(n,s){if(void 0!==s){var i=r[n];if(void 0===i)return s;if(t(s.nodes,i))return e(n+1,s.nodes[i]);if(s.name){try{o[s.name]=decodeURIComponent(i)}catch(a){return e(n,void 0)}return e(n+1,s.nodes.$$)}if(s.wildcard){try{o.wildcard=decodeURIComponent(r.slice(n).join("/"))}catch(a){return e(n,void 0)}return s.nodes.$$}return e(n+1)}}(0,this.trie);if(s)return(s=Object.assign({},s)).params=o,s},n.prototype.mount=function(n,t){e.equal(typeof n,"string","route should be a string"),e.equal(typeof t,"object","trie should be a object");var r=n.replace(/^\//,"").split("/"),o=null,s=null;if(1===r.length)s=r[0],o=this.create(s);else{var i=r.join("/");s=r[0],o=this.create(i)}Object.assign(o.nodes,t.nodes),t.name&&(o.name=t.name),o.nodes[""]&&(Object.keys(o.nodes[""]).forEach(function(e){"nodes"!==e&&(o[e]=o.nodes[""][e])}),Object.assign(o.nodes,o.nodes[""].nodes),delete o.nodes[""].nodes)};
},{"assert":"dqTS"}],"WLyw":[function(require,module,exports) {
var r=require("assert"),e=require("./trie");function t(n){if(!(this instanceof t))return new t(n);var a=(n||"").replace(/^\//,""),i=e();return u._trie=i,u.on=function(e,t){if(r.equal(typeof e,"string"),r.equal(typeof t,"function"),e=e||"/",t._wayfarer&&t._trie)i.mount(e,t._trie.trie);else{var n=i.create(e);n.cb=t,n.route=e}return u},u.emit=u,u.match=o,u._wayfarer=!0,u;function u(r){var e=o(r),t=new Array(arguments.length);t[0]=e.params;for(var n=1;n<t.length;n++)t[n]=arguments[n];return e.cb.apply(e.cb,t)}function o(e){r.notEqual(e,void 0,"'route' must be defined");var t=i.match(e);if(t&&t.cb)return new c(t);var n=i.match(a);if(n&&n.cb)return new c(n);throw new Error("route '"+e+"' did not match")}function c(r){this.cb=r.cb,this.route=r.route,this.params=r.params}}module.exports=t;
},{"assert":"dqTS","./trie":"Lphv"}],"g4s0":[function(require,module,exports) {
var e=require("assert"),t=require("wayfarer"),r=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),o="^(file://|/)(.*.html?/?)?",n="^(http(s)?(://))?(www.)?",i="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",p="[?].*$",u=new RegExp(o),a=new RegExp(n+i),c=new RegExp("#"),f=new RegExp(p);function l(e){if(!(this instanceof l))return new l(e);e=e||{},this.router=t(e.default||"/404")}function w(e,t){return e=t?e.replace(u,""):e.replace(a,""),decodeURI(e.replace(f,"").replace(c,"/"))}module.exports=l,l.prototype.on=function(t,r){e.equal(typeof t,"string"),t=t.replace(/^[#/]/,""),this.router.on(t,r)},l.prototype.emit=function(t){return e.equal(typeof t,"string"),t=w(t,r),this.router.emit(t)},l.prototype.match=function(t){return e.equal(typeof t,"string"),t=w(t,r),this.router.match(t)};
},{"assert":"dqTS","wayfarer":"WLyw"}],"HdcH":[function(require,module,exports) {
module.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"];
},{}],"crZP":[function(require,module,exports) {
var e=require("./events"),t=e.length,u=1,l=3,a=8;function i(e,t){var i=e.nodeType,s=e.nodeName;i===u&&n(e,t),i!==l&&i!==a||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),"INPUT"===s?v(e,t):"OPTION"===s?o(e,t):"TEXTAREA"===s&&d(e,t),r(e,t)}function n(e,t){for(var u=t.attributes,l=e.attributes,a=null,i=null,n=null,r=null,o=l.length-1;o>=0;--o)n=(r=l[o]).name,a=r.namespaceURI,i=r.value,a?(n=r.localName||n,t.getAttributeNS(a,n)!==i&&t.setAttributeNS(a,n,i)):t.hasAttribute(n)?t.getAttribute(n)!==i&&("null"===i||"undefined"===i?t.removeAttribute(n):t.setAttribute(n,i)):t.setAttribute(n,i);for(var v=u.length-1;v>=0;--v)!1!==(r=u[v]).specified&&(n=r.name,(a=r.namespaceURI)?(n=r.localName||n,e.hasAttributeNS(a,n)||t.removeAttributeNS(a,n)):e.hasAttributeNS(null,n)||t.removeAttribute(n))}function r(u,l){for(var a=0;a<t;a++){var i=e[a];u[i]?l[i]=u[i]:l[i]&&(l[i]=void 0)}}function o(e,t){s(e,t,"selected")}function v(e,t){var u=e.value,l=t.value;s(e,t,"checked"),s(e,t,"disabled"),e.indeterminate!==t.indeterminate&&(t.indeterminate=e.indeterminate),"file"!==t.type&&(u!==l&&(t.setAttribute("value",u),t.value=u),"null"===u&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=u):t.removeAttribute("value"))}function d(e,t){var u=e.value;if(u!==t.value&&(t.value=u),t.firstChild&&t.firstChild.nodeValue!==u){if(""===u&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=u}}function s(e,t,u){e[u]!==t[u]&&(t[u]=e[u],e[u]?t.setAttribute(u,""):t.removeAttribute(u))}module.exports=i;
},{"./events":"HdcH"}],"Xlgj":[function(require,module,exports) {
var e=require("nanoassert"),o=require("./lib/morph"),n=3;function a(o,n,a){return e.equal(typeof o,"object","nanomorph: oldTree should be an object"),e.equal(typeof n,"object","nanomorph: newTree should be an object"),a&&a.childrenOnly?(i(n,o),o):(e.notEqual(n.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),d(n,o))}function d(e,n){return n?e?e.isSameNode&&e.isSameNode(n)?n:e.tagName!==n.tagName||r(e)!==r(n)?e:(o(e,n),i(e,n),n):null:e}function r(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function i(e,o){for(var n,a,r,i,l=0,s=0;n=o.childNodes[s],a=e.childNodes[s-l],n||a;s++)if(a)if(n)if(t(a,n))(r=d(a,n))!==n&&(o.replaceChild(r,n),l++);else{i=null;for(var u=s;u<o.childNodes.length;u++)if(t(o.childNodes[u],a)){i=o.childNodes[u];break}i?((r=d(a,i))!==i&&l++,o.insertBefore(r,n)):a.id||n.id?(o.insertBefore(a,n),l++):(r=d(a,n))!==n&&(o.replaceChild(r,n),l++)}else o.appendChild(a),l++;else o.removeChild(n),s--}function t(e,o){return e.id?e.id===o.id:e.isSameNode?e.isSameNode(o):e.tagName===o.tagName&&(e.type===n&&e.nodeValue===o.nodeValue)}module.exports=a;
},{"nanoassert":"dqTS","./lib/morph":"crZP"}],"Eg1L":[function(require,module,exports) {
var e=/([^?=&]+)(=([^&]*))?/g,r=require("assert");function n(n){r.equal(typeof n,"string","nanoquery: url should be type string");var o={};return n.replace(/^.*\?/,"").replace(e,function(e,r,n,t){var a=decodeURIComponent(t),u=decodeURIComponent(r);o.hasOwnProperty(u)?Array.isArray(o[u])?o[u].push(a):o[u]=[o[u],a]:o[u]=a}),o}module.exports=n;
},{"assert":"dqTS"}],"SR5R":[function(require,module,exports) {
var e=require("assert"),t=/(noopener|noreferrer) (noopener|noreferrer)/,o=/^[\w-_]+:/;function n(n,r){e.notEqual(typeof window,"undefined","nanohref: expected window to exist"),r=r||window.document,e.equal(typeof n,"function","nanohref: cb should be type function"),e.equal(typeof r,"object","nanohref: root should be type object"),window.addEventListener("click",function(e){if(!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.defaultPrevented)){var a=function e(t){if(t&&t!==r)return"a"!==t.localName||void 0===t.href?e(t.parentNode):t}(e.target);a&&(window.location.protocol!==a.protocol||window.location.hostname!==a.hostname||window.location.port!==a.port||a.hasAttribute("data-nanohref-ignore")||a.hasAttribute("download")||"_blank"===a.getAttribute("target")&&t.test(a.getAttribute("rel"))||o.test(a.getAttribute("href"))||(e.preventDefault(),n(a)))}})}module.exports=n;
},{"assert":"dqTS"}],"tNg8":[function(require,module,exports) {
"use strict";var n=require("assert");function e(e,o){n.equal(typeof e,"function","nanoraf: render should be a function"),n.ok("function"==typeof o||void 0===o,"nanoraf: raf should be a function or undefined"),o||(o=window.requestAnimationFrame);var r=!1,u=null;return function(){null!==u||r||(r=!0,o(function(){r=!1;for(var n=u.length,o=new Array(n),t=0;t<n;t++)o[t]=u[t];e.apply(e,o),u=null})),u=arguments}}module.exports=e;
},{"assert":"dqTS"}],"Fo5F":[function(require,module,exports) {
"use strict";module.exports=function(t,e,r){var n,o=t.length;if(!(e>=o||0===r)){var f=o-(r=e+r>o?o-e:r);for(n=e;n<f;++n)t[n]=t[n+r];t.length=f}};
},{}],"NEEd":[function(require,module,exports) {
var e=require("remove-array-items"),t=require("nanotiming"),s=require("assert");function n(e){if(!(this instanceof n))return new n(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}module.exports=n,n.prototype.emit=function(e){s.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var n=[],i=1,r=arguments.length;i<r;i++)n.push(arguments[i]);var o=t(this._name+"('"+e.toString()+"')"),u=this._listeners[e];return u&&u.length>0&&this._emit(this._listeners[e],n),this._starListeners.length>0&&this._emit(this._starListeners,e,n,o.uuid),o(),this},n.prototype.on=n.prototype.addListener=function(e,t){return s.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),s.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},n.prototype.prependListener=function(e,t){return s.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),s.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},n.prototype.once=function(e,t){s.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),s.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,function s(){t.apply(n,arguments);n.removeListener(e,s)}),this},n.prototype.prependOnceListener=function(e,t){s.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),s.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,function s(){t.apply(n,arguments);n.removeListener(e,s)}),this},n.prototype.removeListener=function(t,n){return s.ok("string"==typeof t||"symbol"==typeof t,"nanobus.removeListener: eventName should be type string or symbol"),s.equal(typeof n,"function","nanobus.removeListener: listener should be type function"),"*"===t?(this._starListeners=this._starListeners.slice(),i(this._starListeners,n)):(void 0!==this._listeners[t]&&(this._listeners[t]=this._listeners[t].slice()),i(this._listeners[t],n));function i(t,s){if(t){var n=t.indexOf(s);return-1!==n?(e(t,n,1),!0):void 0}}},n.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},n.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,s=[];if(t)for(var n=t.length,i=0;i<n;i++)s.push(t[i]);return s},n.prototype._emit=function(e,t,s,n){if(void 0!==e&&0!==e.length){void 0===s&&(s=t,t=null),t&&(s=void 0!==n?[t].concat(s,n):[t].concat(s));for(var i=e.length,r=0;r<i;r++){var o=e[r];o.apply(o,s)}}};
},{"remove-array-items":"Fo5F","nanotiming":"zdkD","assert":"dqTS"}],"wJSG":[function(require,module,exports) {
function t(e){if(!(this instanceof t))return new t(e);"number"==typeof e&&(e={max:e}),e||(e={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}module.exports=t,Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),t.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},t.prototype.remove=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}},t.prototype._unlink=function(t,e,h){this.length--,0===this.length?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=h,this.cache[this.tail].prev=null):(this.cache[e].next=h,this.cache[h].prev=e)},t.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}},t.prototype.set=function(t,e){var h;if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){if((h=this.cache[t]).value=e,this.maxAge&&(h.modified=Date.now()),t===this.head)return e;this._unlink(t,h.prev,h.next)}else h={value:e,modified:0,next:null,prev:null},this.maxAge&&(h.modified=Date.now()),this.cache[t]=h,this.length===this.max&&this.evict();return this.length++,h.next=null,h.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e},t.prototype._checkAge=function(t,e){return!(this.maxAge&&Date.now()-e.modified>this.maxAge)||(this.remove(t),!1)},t.prototype.get=function(t){if("string"!=typeof t&&(t=""+t),this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}},t.prototype.evict=function(){this.tail&&this.remove(this.tail)};
},{}],"Pku5":[function(require,module,exports) {
var e=require("assert"),t=require("nanolru");function o(n,h,r){e.ok(this instanceof o,"ChooComponentCache should be created with `new`"),e.equal(typeof n,"object","ChooComponentCache: state should be type object"),e.equal(typeof h,"function","ChooComponentCache: emit should be type function"),this.cache="number"==typeof r?new t(r):r||new t(100),this.state=n,this.emit=h}function n(e){return new(e.bind.apply(e,arguments))}module.exports=o,o.prototype.render=function(t,o){e.equal(typeof t,"function","ChooComponentCache.render: Component should be type function"),e.ok("string"==typeof o||"number"==typeof o,"ChooComponentCache.render: id should be type string or type number");var h=this.cache.get(o);if(!h){for(var r=[],i=2,u=arguments.length;i<u;i++)r.push(arguments[i]);r.unshift(t,o,this.state,this.emit),h=n.apply(n,r),this.cache.set(o,h)}return h};
},{"assert":"dqTS","nanolru":"wJSG"}],"wEDf":[function(require,module,exports) {
var e=require("scroll-to-anchor"),t=require("document-ready"),o=require("nanotiming"),n=require("nanorouter"),r=require("nanomorph"),i=require("nanoquery"),s=require("nanohref"),a=require("nanoraf"),h=require("nanobus"),u=require("assert"),c=require("./component/cache");module.exports=l;var d={};function l(e){var t=o("choo.constructor");if(!(this instanceof l))return new l(e);e=e||{},u.equal(typeof e,"object","choo: opts should be type object");var r=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===e.history||e.history,this._hrefEnabled=void 0===e.href||e.href,this._hashEnabled=void 0!==e.hash&&e.hash,this._hasWindow="undefined"!=typeof window,this._cache=e.cache,this._loaded=!1,this._stores=[function(e){r.emitter.prependListener(r._events.DOMTITLECHANGE,function(t){u.equal(typeof t,"string","events.DOMTitleChange: title should be type string"),e.title=t,r._hasWindow&&(document.title=t)})}],this._tree=null;var i={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,i):i,delete window.initialState):this.state=i,this.router=n({curry:!0}),this.emitter=h("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title),t()}l.prototype.route=function(e,t){var n=o("choo.route('"+e+"')");u.equal(typeof e,"string","choo.route: route should be type string"),u.equal(typeof t,"function","choo.handler: route should be type function"),this.router.on(e,t),n()},l.prototype.use=function(e){u.equal(typeof e,"function","choo.use: cb should be type function");var t=this;this._stores.push(function(n){var r="choo.use";r=e.storeName?r+"("+e.storeName+")":r;var i=o(r);e(n,t.emitter,t),i()})},l.prototype.start=function(){u.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var n=o("choo.start"),i=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){i._matchRoute(i.state),i._loaded&&(i.emitter.emit(i._events.RENDER),setTimeout(e.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){i.emitter.emit(i._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){u.equal(typeof e,"string","events.pushState: href should be type string"),window.history.pushState(d,null,e),i.emitter.emit(i._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){u.equal(typeof e,"string","events.replaceState: href should be type string"),window.history.replaceState(d,null,e),i.emitter.emit(i._events.NAVIGATE)}),window.onpopstate=function(){i.emitter.emit(i._events.POPSTATE)},i._hrefEnabled&&s(function(t){var o=t.href,n=t.hash;o!==window.location.href?i.emitter.emit(i._events.PUSHSTATE,o):!i._hashEnabled&&n&&e(n)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(e){e(i.state)}),this._tree=this._prerender(this.state),u.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(i._events.RENDER,a(function(){var e=o("choo.render"),t=i._prerender(i.state);u.ok(t,"choo.render: no valid DOM node returned for location "+i.state.href),u.equal(i._tree.nodeName,t.nodeName,"choo.render: The target node <"+i._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+t.nodeName.toLowerCase()+">.");var n=o("choo.morph");r(i._tree,t),n(),e()})),t(function(){i.emitter.emit(i._events.DOMCONTENTLOADED),i._loaded=!0}),n(),this._tree},l.prototype.mount=function(e){var n=o("choo.mount('"+e+"')");if("object"!=typeof window)return u.ok("string"==typeof e,"choo.mount: selector should be type String"),this.selector=e,n(),this;u.ok("string"==typeof e||"object"==typeof e,"choo.mount: selector should be type String or HTMLElement");var i=this;t(function(){var t=o("choo.render"),n=i.start();i._tree="string"==typeof e?document.querySelector(e):e,u.ok(i._tree,"choo.mount: could not query selector: "+e),u.equal(i._tree.nodeName,n.nodeName,"choo.mount: The target node <"+i._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+n.nodeName.toLowerCase()+">.");var s=o("choo.morph");r(i._tree,n),s(),t()}),n()},l.prototype.toString=function(e,t){(t=t||{}).components=t.components||{},t.events=Object.assign({},t.events,this._events),u.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),u.equal(typeof e,"string","choo.toString: location should be type string"),u.equal(typeof t,"object","choo.toString: state should be type object"),this._setCache(t),this._matchRoute(t,e),this.emitter.removeAllListeners(),this._stores.forEach(function(e){e(t)});var o=this._prerender(t);return u.ok(o,"choo.toString: no valid value returned for the route "+e),u(!Array.isArray(o),"choo.toString: return value was an array for the route "+e),"string"==typeof o.outerHTML?o.outerHTML:o.toString()},l.prototype._matchRoute=function(e,t){var o,n;t?(o=t.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(o=o.replace(/#.+$/,"")),n=t):(o=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(o+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var r=this.router.match(o);this._handler=r.cb,e.href=o,e.query=i(n),e.route=r.route,e.params=r.params},l.prototype._prerender=function(e){var t=o("choo.prerender('"+e.route+"')"),n=this._handler(e,this.emit);return t(),n},l.prototype._setCache=function(e){var t=new c(e,this.emitter.emit.bind(this.emitter),this._cache);function o(e,o){u.equal(typeof e,"function","choo.state.cache: Component should be type function");for(var n=[],r=0,i=arguments.length;r<i;r++)n.push(arguments[r]);return t.render.apply(t,n)}e.cache=o,o.toJSON=function(){return null}};
},{"scroll-to-anchor":"psEw","document-ready":"QKPX","nanotiming":"zdkD","nanorouter":"g4s0","nanomorph":"Xlgj","nanoquery":"Eg1L","nanohref":"SR5R","nanoraf":"tNg8","nanobus":"NEEd","assert":"dqTS","./component/cache":"Pku5"}],"Fszt":[function(require,module,exports) {
module.exports=r;var t={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function r(r){return function(e,n,o){for(var u in n)u in t&&(n[t[u]]=n[u],delete n[u]);return r(e,n,o)}}
},{}],"P8fc":[function(require,module,exports) {
var e=require("hyperscript-attribute-to-property"),t=0,n=1,r=2,s=3,h=4,l=5,i=6,o=7,f=8,p=9,u=10,a=11,g=12,c=13;function m(e){return e===p||e===u}module.exports=function(y,d){d||(d={});var b=d.concat||function(e,t){return String(e)+String(t)};return!1!==d.attrToProp&&(y=e(y)),function(e){for(var A=n,k="",F=arguments.length,L=[],S=0;S<e.length;S++)if(S<F-1){var x=arguments[S+1],M=O(e[S]),C=A;C===u&&(C=f),C===p&&(C=f),C===o&&(C=f),C===h&&(C=l),C===r?"/"===k?(M.push([r,"/",x]),k=""):M.push([r,x]):C===c&&d.comments?k+=String(x):C!==c&&M.push([t,C,x]),L.push.apply(L,M)}else L.push.apply(L,O(e[S]));var T=[null,{},[]],$=[[T,-1]];for(S=0;S<L.length;S++){var j=$[$.length-1][0],B=(M=L[S])[0];if(B===r&&/^\//.test(M[1])){var D=$[$.length-1][1];$.length>1&&($.pop(),$[$.length-1][0][2][D]=y(j[0],j[1],j[2].length?j[2]:void 0))}else if(B===r){var E=[M[1],{},[]];j[2].push(E),$.push([E,j[2].length-1])}else if(B===l||B===t&&M[1]===l){for(var P,R="";S<L.length;S++)if(L[S][0]===l)R=b(R,L[S][1]);else{if(L[S][0]!==t||L[S][1]!==l)break;if("object"!=typeof L[S][2]||R)R=b(R,L[S][2]);else for(P in L[S][2])L[S][2].hasOwnProperty(P)&&!j[1][P]&&(j[1][P]=L[S][2][P])}L[S][0]===a&&S++;for(var G=S;S<L.length;S++)if(L[S][0]===f||L[S][0]===l)j[1][R]?""===L[S][1]||(j[1][R]=b(j[1][R],L[S][1])):j[1][R]=w(L[S][1]);else{if(L[S][0]!==t||L[S][1]!==f&&L[S][1]!==l){!R.length||j[1][R]||S!==G||L[S][0]!==s&&L[S][0]!==g||(j[1][R]=R.toLowerCase()),L[S][0]===s&&S--;break}j[1][R]?""===L[S][2]||(j[1][R]=b(j[1][R],L[S][2])):j[1][R]=w(L[S][2])}}else if(B===l)j[1][M[1]]=!0;else if(B===t&&M[1]===l)j[1][M[2]]=!0;else if(B===s){if(v(j[0])&&$.length){D=$[$.length-1][1];$.pop(),$[$.length-1][0][2][D]=y(j[0],j[1],j[2].length?j[2]:void 0)}}else if(B===t&&M[1]===n)void 0===M[2]||null===M[2]?M[2]="":M[2]||(M[2]=b("",M[2])),Array.isArray(M[2][0])?j[2].push.apply(j[2],M[2]):j[2].push(M[2]);else if(B===n)j[2].push(M[1]);else if(B!==a&&B!==g)throw new Error("unhandled: "+B)}if(T[2].length>1&&/^\s*$/.test(T[2][0])&&T[2].shift(),T[2].length>2||2===T[2].length&&/\S/.test(T[2][1])){if(d.createFragment)return d.createFragment(T[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(T[2][0])&&"string"==typeof T[2][0][0]&&Array.isArray(T[2][0][2])&&(T[2][0]=y(T[2][0][0],T[2][0][1],T[2][0][2])),T[2][0];function O(e){var t=[];A===o&&(A=h);for(var y=0;y<e.length;y++){var v=e.charAt(y);A===n&&"<"===v?(k.length&&t.push([n,k]),k="",A=r):">"!==v||m(A)||A===c?A===c&&/-$/.test(k)&&"-"===v?(d.comments&&t.push([f,k.substr(0,k.length-1)]),k="",A=n):A===r&&/^!--$/.test(k)?(d.comments&&t.push([r,k],[l,"comment"],[a]),k=v,A=c):A===n||A===c?k+=v:A===r&&"/"===v&&k.length||(A===r&&/\s/.test(v)?(k.length&&t.push([r,k]),k="",A=h):A===r?k+=v:A===h&&/[^\s"'=/]/.test(v)?(A=l,k=v):A===h&&/\s/.test(v)?(k.length&&t.push([l,k]),t.push([g])):A===l&&/\s/.test(v)?(t.push([l,k]),k="",A=i):A===l&&"="===v?(t.push([l,k],[a]),k="",A=o):A===l?k+=v:A!==i&&A!==h||"="!==v?A!==i&&A!==h||/\s/.test(v)?A===o&&'"'===v?A=u:A===o&&"'"===v?A=p:A===u&&'"'===v?(t.push([f,k],[g]),k="",A=h):A===p&&"'"===v?(t.push([f,k],[g]),k="",A=h):A!==o||/\s/.test(v)?A===f&&/\s/.test(v)?(t.push([f,k],[g]),k="",A=h):A!==f&&A!==p&&A!==u||(k+=v):(A=f,y--):(t.push([g]),/[\w-]/.test(v)?(k+=v,A=l):A=h):(t.push([a]),A=o)):(A===r&&k.length?t.push([r,k]):A===l?t.push([l,k]):A===f&&k.length&&t.push([f,k]),t.push([s]),k="",A=n)}return A===n&&k.length?(t.push([n,k]),k=""):A===f&&k.length?(t.push([f,k]),k=""):A===u&&k.length?(t.push([f,k]),k=""):A===p&&k.length?(t.push([f,k]),k=""):A===l&&(t.push([l,k]),k=""),t}};function w(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:null==e?e:b("",e)}};var y=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$");function v(e){return y.test(e)}
},{"hyperscript-attribute-to-property":"Fszt"}],"gPFH":[function(require,module,exports) {
"use strict";var e=/\n[\s]+$/,a=/^\n[\s]+/,r=/[\s]+$/,n=/^[\s]+/,o=/[\n\s]+/g,l=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],d=["code","pre","textarea"];module.exports=function p(t,i){if(Array.isArray(i))for(var c,s,f=t.nodeName.toLowerCase(),u=!1,m=0,b=i.length;m<b;m++){var x=i[m];if(Array.isArray(x))p(t,x);else{("number"==typeof x||"boolean"==typeof x||"function"==typeof x||x instanceof Date||x instanceof RegExp)&&(x=x.toString());var y=t.childNodes[t.childNodes.length-1];if("string"==typeof x)u=!0,y&&"#text"===y.nodeName?y.nodeValue+=x:(x=t.ownerDocument.createTextNode(x),t.appendChild(x),y=x),m===b-1&&(u=!1,-1===l.indexOf(f)&&-1===d.indexOf(f)?""===(c=y.nodeValue.replace(a,"").replace(r,"").replace(e,"").replace(o," "))?t.removeChild(y):y.nodeValue=c:-1===d.indexOf(f)&&(s=0===m?"":" ",c=y.nodeValue.replace(a,s).replace(n," ").replace(r,"").replace(e,"").replace(o," "),y.nodeValue=c));else if(x&&x.nodeType){u&&(u=!1,-1===l.indexOf(f)&&-1===d.indexOf(f)?""===(c=y.nodeValue.replace(a,"").replace(e," ").replace(o," "))?t.removeChild(y):y.nodeValue=c:-1===d.indexOf(f)&&(c=y.nodeValue.replace(n," ").replace(a,"").replace(e," ").replace(o," "),y.nodeValue=c));var V=x.nodeName;V&&(f=V.toLowerCase()),t.appendChild(x)}}}};
},{}],"yLdR":[function(require,module,exports) {
"use strict";module.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];
},{}],"YVSa":[function(require,module,exports) {
"use strict";module.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"];
},{}],"XElX":[function(require,module,exports) {
"use strict";module.exports=["indeterminate"];
},{}],"Ot7I":[function(require,module,exports) {
"use strict";var e=require("hyperx"),r=require("./append-child"),t=require("./svg-tags"),n=require("./bool-props"),a=require("./direct-props"),i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",l="!--";module.exports=function(c){function o(e,o,m){var u;-1!==t.indexOf(e)&&(o.namespace=i);var p=!1;o.namespace&&(p=o.namespace,delete o.namespace);var f=!1;if(o.is&&(f=o.is,delete o.is),p)u=f?c.createElementNS(p,e,{is:f}):c.createElementNS(p,e);else{if(e===l)return c.createComment(o.comment);u=f?c.createElement(e,{is:f}):c.createElement(e)}for(var d in o)if(o.hasOwnProperty(d)){var g=d.toLowerCase(),h=o[d];if("classname"===g&&(g="class",d="class"),"htmlFor"===d&&(d="for"),-1!==n.indexOf(g))if("true"===String(h))h=g;else if("false"===String(h))continue;"on"===g.slice(0,2)||-1!==a.indexOf(g)?u[d]=h:p?"xlink:href"===d?u.setAttributeNS(s,d,h):/^xmlns($|:)/i.test(d)||u.setAttributeNS(null,d,h):u.setAttribute(d,h)}return r(u,m),u}var m=e(o,{comments:!0,createFragment:function e(r){for(var t=c.createDocumentFragment(),n=0;n<r.length;n++)null!=r[n]&&(Array.isArray(r[n])?t.appendChild(e(r[n])):("string"==typeof r[n]&&(r[n]=c.createTextNode(r[n])),t.appendChild(r[n])));return t}});return m.default=m,m.createComment=o,m};
},{"hyperx":"P8fc","./append-child":"gPFH","./svg-tags":"yLdR","./bool-props":"YVSa","./direct-props":"XElX"}],"QR4u":[function(require,module,exports) {
module.exports=require("./dom")(document);
},{"./dom":"Ot7I"}],"xyiW":[function(require,module,exports) {
module.exports=require("nanohtml");
},{"nanohtml":"QR4u"}],"sC8V":[function(require,module,exports) {

},{}],"DnRs":[function(require,module,exports) {
var global = arguments[3];
var e,d=arguments[3],n=void 0!==d?d:"undefined"!=typeof window?window:{},o=require("min-document");"undefined"!=typeof document?e=document:(e=n["__GLOBAL_DOCUMENT_CACHE@4"])||(e=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),module.exports=e;
},{"min-document":"sC8V"}],"J3Xk":[function(require,module,exports) {
var global = arguments[3];
var e,d=arguments[3];e="undefined"!=typeof window?window:void 0!==d?d:"undefined"!=typeof self?self:{},module.exports=e;
},{}],"Fqbv":[function(require,module,exports) {
var t=require("global/document"),e=require("global/window"),o=require("assert"),r=Object.create(null),n="onloadid"+(new Date%9e6).toString(36),i="data-"+n,u=0;if(e&&e.MutationObserver){var a=new MutationObserver(function(t){if(!(Object.keys(r).length<1))for(var e=0;e<t.length;e++)t[e].attributeName!==i?(f(t[e].removedNodes,c),f(t[e].addedNodes,l)):b(t[e],l,c)});t.body?d(a):t.addEventListener("DOMContentLoaded",function(t){d(a)})}function d(e){e.observe(t.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[i]})}function l(t,e){r[t][0]&&0===r[t][2]&&(r[t][0](e),r[t][2]=1)}function c(t,e){r[t][1]&&1===r[t][2]&&(r[t][1](e),r[t][2]=0)}function b(t,e,o){var n=t.target.getAttribute(i);s(t.oldValue,n)?r[n]=r[t.oldValue]:(r[t.oldValue]&&o(t.oldValue,t.target),r[n]&&e(n,t.target))}function s(t,e){return!(!t||!e)&&r[t][3]===r[e][3]}function f(t,e){for(var o=Object.keys(r),n=0;n<t.length;n++){if(t[n]&&t[n].getAttribute&&t[n].getAttribute(i)){var u=t[n].getAttribute(i);o.forEach(function(o){u===o&&e(o,t[n])})}t[n].childNodes.length>0&&f(t[n].childNodes,e)}}module.exports=function e(n,a,d,l){return o(t.body,"on-load: will not work prior to DOMContentLoaded"),a=a||function(){},d=d||function(){},n.setAttribute(i,"o"+u),r["o"+u]=[a,d,0,l||e.caller],u+=1,n},module.exports.KEY_ATTR=i,module.exports.KEY_ID=n;
},{"global/document":"DnRs","global/window":"J3Xk","assert":"dqTS"}],"fakS":[function(require,module,exports) {
var e=require("global/document"),t=require("nanotiming"),n=require("nanomorph"),r=require("on-load"),o=r.KEY_ID,i=r.KEY_ATTR,s=require("assert");function a(){return"ncid-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function d(t){this._hasWindow="undefined"!=typeof window,this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=t||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];var n=this;Object.defineProperty(this,"element",{get:function(){var t=e.getElementById(n._id);if(t)return t.dataset.nanocomponent===n._ncID?t:void 0}})}module.exports=d,d.prototype.render=function(){for(var e,i=t(this._name+".render"),s=new Array(arguments.length),a=0;a<arguments.length;a++)s[a]=arguments[a];if(this._hasWindow){if(this.element){e=this.element;var d=t(this._name+".update"),h=this._rerender||this.update.apply(this,s);if(d(),this._rerender&&(this._rerender=!1),h){var l=this._handleRender(s),_=t(this._name+".morph");n(e,l),_(),this.afterupdate&&this.afterupdate(e)}return this._proxy||(this._proxy=this._createProxy()),i(),this._proxy}return this._reset(),e=this._handleRender(s),this.beforerender&&this.beforerender(e),(this.load||this.unload||this.afterreorder)&&(r(e,this._handleLoad,this._handleUnload,this._ncID),this._olID=e.dataset[o]),i(),e}var u=t(this._name+".create");return e=this.createElement.apply(this,s),u(),i(),e},d.prototype.rerender=function(){s(this.element,"nanocomponent: cant rerender on an unmounted dom node"),this._rerender=!0,this.render.apply(this,this._arguments)},d.prototype._handleRender=function(e){var n=t(this._name+".createElement"),r=this.createElement.apply(this,e);return n(),this._rootNodeName||(this._rootNodeName=r.nodeName),s(r instanceof window.Element,"nanocomponent: createElement should return a single DOM node"),s.equal(this._rootNodeName,r.nodeName,"nanocomponent: root node types cannot differ between re-renders"),this._arguments=e,this._brandNode(this._ensureID(r))},d.prototype._createProxy=function(){var t=e.createElement(this._rootNodeName),n=this;return this._brandNode(t),t.id=this._id,t.setAttribute("data-proxy",""),t.isSameNode=function(e){return e&&e.dataset.nanocomponent===n._ncID},t},d.prototype._reset=function(){this._ncID=a(),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null},d.prototype._brandNode=function(e){return e.setAttribute("data-nanocomponent",this._ncID),this._olID&&e.setAttribute(i,this._olID),e},d.prototype._ensureID=function(e){return e.id?this._id=e.id:e.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),e},d.prototype._handleLoad=function(e){this._loaded?this.afterreorder&&this.afterreorder(e):(this._loaded=!0,this.load&&this.load(e))},d.prototype._handleUnload=function(e){this.element||(this._loaded=!1,this.unload&&this.unload(e))},d.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")},d.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};
},{"global/document":"DnRs","nanotiming":"zdkD","nanomorph":"Xlgj","on-load":"Fqbv","assert":"dqTS"}],"eYdX":[function(require,module,exports) {
module.exports=require("nanocomponent");
},{"nanocomponent":"fakS"}],"duAu":[function(require,module,exports) {
function e(e){var a=[[".",".","."],[".",".","."],[".",".","."]],r=0,n=0;e.length<3&&(n=1),e[0].length<3&&(r=1);for(var t=0;t<e.length;t++)for(var o=0;o<e[t].length;o++)a[t+n][o+r]=e[t][o];return a}function a(a){var r=a.when,t=void 0===r?[[]]:r,i=a.then,s=void 0===i?[[]]:i;this.when=e(t),this.then=e(s),this.match=function(e,a,r){for(var t=e[r][a],o=!0,i=0;i<3;i++)for(var s=0;s<3;s++){var h=this.when[i][s],c=e[r+i-1][a+s-1];switch(h){case"@":c.name!==t.name&&(o=!1);break;case".":break;case"?":c.name===n.name&&(o=!1);break;case"_":c.name!==n.name&&(o=!1);break;case null:break;default:c.name[0]!==h&&(o=!1)}}return o},this.apply=function(e,a,r){for(var t=e[r][a],i=0;i<3;i++)for(var s=0;s<3;s++){var h=this.then[i][s];switch(h){case"@":e[r+i-1][a+s-1]=o[t.name];break;case".":case"?":case null:break;case"_":e[r+i-1][a+s-1]=n;break;default:e[r+i-1][a+s-1]=o[h]}}return e}}function r(e){var a=e.name,r=void 0===a?"_":a,n=e.rules,t=void 0===n?[]:n,o=e.color,i=void 0===o?"white":o;this.name=r,this.rules=t,this.color=i}var n=new r({name:"_"});function t(e){e||(e=[]);for(var a=0;a<c;a++){e[a]=[];for(var r=0;r<h;r++)e[a].push(n)}return e}for(var o={_:n},i=65;i<91;i++){var s=String.fromCharCode(i);o[s]=new r({name:"".concat(s)})}var h=30,c=30,v=t();module.exports={GRID_WIDTH:h,GRID_HEIGHT:c,Rule:a,Element:r,grid:v,elements:o,clearGrid:t};
},{}],"A2T1":[function(require,module,exports) {
function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(){var n=S(["<canvas width="," height=","></canvas>"]);return e=function(){return n},n}function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function i(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}function o(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&u(n,e)}function u(n,e){return(u=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function c(n){var e=l();return function(){var t,r=f(n);if(e){var i=f(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function d(){var n=S(['\n    <div id="editor">\n      <div class="element-list">\n        ','\n      </div>\n      <div class="rules">\n        ','\n        <button class="add-rule" onclick=','>+</button>\n      </div>\n      <div class="element-picker">\n        ',"\n      </div>\n    </div>\n  "]);return d=function(){return n},n}function m(){var n=S(["\n                    <button onclick=",">","</button>\n                  "]);return m=function(){return n},n}function p(){var n=S(["\n              <div>\n                ","\n              </div>\n            "]);return p=function(){return n},n}function v(){var n=S(["\n                    <button onclick=",">","</button>\n                  "]);return v=function(){return n},n}function g(){var n=S(["\n              <div>\n                ","\n              </div>\n            "]);return g=function(){return n},n}function h(){var n=S(['\n      <div class="rule">\n        <div class="when">\n          ',"\n        </div>\n        <div> ",' </div>\n        <div class="then">\n          ',"\n        </div>\n      </div>\n    "]);return h=function(){return n},n}function b(){var n=S(["\n          <button\n            class=","\n            onclick=","\n            >\n            ","\n          </button>"]);return b=function(){return n},n}function y(){var n=S(["\n          <button\n            class=","\n            onclick=","\n            >\n            ","\n          </button>"]);return y=function(){return n},n}function R(){var n=S(["\n        <button\n          class=","\n          onclick=","\n          >\n          ","\n        </button>\n      "]);return R=function(){return n},n}function w(){var n=S(['\n  <div id="grid">\n    <div class="element-picker">\n      ',"\n      ",'\n    </div>\n    <div class="grid">\n      ',"\n    </div>\n  </div>\n  "]);return w=function(){return n},n}function k(){var n=S(['\n          <button\n            style="background: ','"\n            onclick=',"\n            >\n          ","\n          </button>\n        "]);return k=function(){return n},n}function x(){var n=S(["\n      <button onclick=",">","</button>\n      <button onclick=",">","</button>\n      <button onclick=",">","</button>\n    "]);return x=function(){return n},n}function F(){var n=S(['\n        <button\n          style="background: ','"\n          class=',"\n          onclick=","\n          >\n          ","\n        </button>\n      "]);return F=function(){return n},n}function E(){var n=S(['\n    <div id="app">\n      ',"\n      ","\n    </div>\n  "]);return E=function(){return n},n}function S(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var O=require("choo"),j=require("choo/html"),G=require("choo/component"),I=require("./splat.js"),z=I.Rule,_=I.Element,P=I.grid,T=I.elements,q=I.clearGrid,C=["#FFFFFF","#000000","#222034","#45283c","#663931","#8f563b","#df7126","#d9a066","#eec39a","#fbf236","#99e550","#6abe30","#37946e","#4b692f","#524b24","#323c39","#3f3f74","#306082","#5b6ee1","#696a6a","#595652","#76428a","#ac3232","#d95763","#d77bba","#8f974a","#8a6f30"],D=O();function X(n,e){n.elementsDict=T,n.elements=Object.values(T),n.grid=P.map(function(n){return n.slice()}),n.grid[5][5]=T.X,n.editingElement="A",n.stampingGrid="X",n.stampingRule="@",n.interval=0,n.playing=!1,console.log("initialState",n),e.on("selectEditingElement",function(t){console.log("select stamping element"),n.editingElement=t,e.emit("render")}),e.on("selectStampingGrid",function(t){console.log("select stamping grid"),n.stampingGrid=t,e.emit("render")}),e.on("selectStampingRule",function(t){console.log("select stamping rule"),n.stampingRule=t,e.emit("render")}),e.on("addRule",function(){console.log("new rule");var t=n.elements.findIndex(function(e){return e.name===n.editingElement});n.elements[t].rules.push(new z({})),e.emit("render")}),e.on("stampGrid",function(t,r){console.log("stamp grid",t,r);var i=n.elements.find(function(e){return e.name===n.stampingGrid});n.grid[r][t]=i,e.emit("render")}),e.on("stampRule",function(t,r,i,o){console.log("stamp rule",t,r,i,o);var u=n.elements.findIndex(function(e){return e.name===n.editingElement});n.elements[u].rules[r][t][o][i]=n.stampingRule,e.emit("render")}),e.on("applyRules",function(){for(var e=0;e<100;e++)for(var t=1+parseInt(28*Math.random()),r=1+parseInt(28*Math.random()),i=n.grid[r][t],o=0;o<i.rules.length;o++){var u=i.rules[o];if(u.match(n.grid,t,r)){n.grid=u.apply(n.grid,t,r);break}}}),e.on("resetGrid",function(){console.log("reset grid"),n.grid=n.grid=P.map(function(n){return n.slice()})}),e.on("play",function(){console.log("play"),n.playing=!0}),e.on("stop",function(){console.log("stop"),n.playing=!1}),n.interval=setInterval(function(){n.playing&&e.emit("applyRules"),n.cache(M,"canvas").render(n,e.emit)},50)}function A(n,e){return j(E(),B(n,e),L(n,e))}function B(n,e){return j(w(),j(x(),function(){return e("play")},">",function(){return e("stop")},"||",function(){return e("resetGrid")},"<"),n.elements.map(function(t,r){var i=t.name===n.stampingGrid?"selected":"";return j(F(),C[r%C.length],i,function(){return e("selectStampingGrid",t.name)},t.name)}),n.cache(M,"canvas").render(n,e))}function L(n,e){var t=n.elements.findIndex(function(e){return e.name===n.editingElement});return j(d(),n.elements.map(function(t){var r=t.name===n.editingElement?"selected":"";return j(R(),r,function(){return e("selectEditingElement",t.name)},t.name)}),n.elements[t].rules.map(function(n,t){var r=n.when,i=n.then;return j(h(),r.map(function(n,r){return j(g(),n.map(function(n,i){return j(v(),function(){return e("stampRule","when",t,i,r)},n)}))}),"=>",i.map(function(n,r){return j(p(),n.map(function(n,i){return j(m(),function(){return e("stampRule","then",t,i,r)},n)}))}))}),function(){return e("addRule")},[["@",".","?"].map(function(t){var r=t===n.stampingRule?"selected":"";return j(y(),r,function(){return e("selectStampingRule",t)},t)}),n.elements.map(function(t){var r=t.name===n.stampingRule?"selected":"";return j(b(),r,function(){return e("selectStampingRule",t.name)},t.name)})])}D.use(X),D.route("/",A),D.mount("#app");var M=function(n){o(u,G);var r=c(u);function u(n,e,i){var o;return t(this,u),(o=r.call(this,n)).n=30,o.size=800,o.res=o.size/o.n,o.cursor={x:0,y:0},o}return i(u,[{key:"update",value:function(n){var e=this,t=this.element.getContext("2d");t.clearRect(0,0,this.element.width,this.element.height);for(var r=parseInt(Y(this.cursor.x,0,this.size,0,this.n)),i=parseInt(Y(this.cursor.y,0,this.size,0,this.n)),o=0;o<this.n;o++)for(var u=0;u<this.n;u++)if(r===u&&i===o){var c=n.elements.findIndex(function(e){return e.name===n.stampingGrid});t.fillStyle=-1!==c?C[c]:"#000000",t.fillRect(u*this.res,o*this.res,this.res,this.res),t.fillStyle="#FFFFFF",t.fillText(n.grid[o][u].name,this.res/4+u*this.res,this.res/4+o*this.res)}else!function(){var r=n.grid[o][u],i=n.elements.findIndex(function(n){return n.name===r.name});t.fillStyle=-1===i?"#FFF":C[i],t.fillRect(u*e.res,o*e.res,e.res,e.res),t.fillStyle="#FFF",t.fillText(n.grid[o][u].name,e.res/4+u*e.res,e.res/4+o*e.res)}();return!1}},{key:"createElement",value:function(n,t){var r=this,i=j(e(),this.size,this.size),o=i.getContext("2d");o.font="".concat(this.res,"px monospace"),o.textAlign="left",o.textBaseline="hanging",o.clearRect(0,0,i.width,i.height),i.addEventListener("mousemove",function(n){var e=n.layerX,t=n.layerY,o=i.width,u=i.height,c=i.getBoundingClientRect(),s=Y(e,0,c.width,0,o),a=Y(t,0,c.height,0,u);r.cursor={x:s,y:a}}),i.addEventListener("mousedown",function(n){var e=parseInt(Y(r.cursor.x,0,r.size,0,r.n)),i=parseInt(Y(r.cursor.y,0,r.size,0,r.n));t("stampGrid",e,i)});for(var u=0;u<this.n;u++)for(var c=0;c<this.n;c++)o.fillText(n.grid[u][c].name,this.res/4+c*this.res,this.res/4+u*this.res);return i}}]),u}();function Y(n,e,t,r,i){return(n-e)*(i-r)/(t-e)+r}
},{"choo":"wEDf","choo/html":"xyiW","choo/component":"eYdX","./splat.js":"duAu"}]},{},["A2T1"], null)
//# sourceMappingURL=app.79e4dbf9.js.map