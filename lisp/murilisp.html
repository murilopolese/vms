<!-- Saved from local source at 2022-07-28T09:05:30Z using monolith v2.6.1 -->
<!DOCTYPE html><html lang="en" dir="ltr"><head>
    <meta charset="utf-8">
    <title>MURILISP</title>
    <style media="screen">
      * {
        box-sizing: border-box;
      }
      html, body {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
        display: flex;
        flex-direction: column;
      }
      textarea {
        width: 100%;
        height: 80%;
        outline: none;
      }
    </style>
    <script src="data:application/javascript;base64,Ly8gQkFCWSBMSVNQRVI6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2FpdG9yb3Nlcy9hMDAyMDAwNWM2YjMxNzg2NGRhNDE2YTI3MGJmOTIxNwpjb25zdCBydWxlcyA9IFsKICB7IHR5cGU6ICdzcGFjZScsIHJlZ2V4OiAvXlxzLyB9LAogIHsgdHlwZTogJ2xQYXJlbicsIHJlZ2V4OiAvXlwoLyB9LAogIHsgdHlwZTogJ3JQYXJlbicsIHJlZ2V4OiAvXlwpLyB9LAogIHsgdHlwZTogJ251bWJlcicsIHJlZ2V4OiAvXlswLTlcLl0rLyB9LAogIHsgdHlwZTogJ3N0cmluZycsIHJlZ2V4OiAvXiIuKj8iLyB9LAogIHsgdHlwZTogJ3ZhcmlhYmxlJywgcmVnZXg6IC9eW15cc1woXCldKy8gfSAvLyB0YWtlIGZyb20gdGhlIGJlZ2lubmluZyAxKyBjaGFyYWN0ZXJzIHVudGlsIHlvdSBoaXQgYSAnICcsICcoJywgb3IgJyknIC8vIFRPRE8gLSBzdXBwb3J0IGVzY2FwZWQgZG91YmxlIHF1b3RlCl07CgoKY29uc3QgdG9rZW5pemVyID0gcnVsZXMgPT4gaW5wdXQgPT4gewogIGZvciAobGV0IGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgIGxldCB0b2tlbml6ZWQgPSBydWxlc1tpXS5yZWdleC5leGVjKGlucHV0KTsKICAgIGlmICh0b2tlbml6ZWQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b2tlbjogdG9rZW5pemVkWzBdLAogICAgICAgIHR5cGU6IHJ1bGVzW2ldLnR5cGUsCiAgICAgICAgcmVzdDogaW5wdXQuc2xpY2UodG9rZW5pemVkWzBdLmxlbmd0aCkKICAgICAgfTsKICAgIH0KICB9CgogIHRocm93IG5ldyBFcnJvcihgbm8gbWF0Y2hpbmcgdG9rZW5pemUgcnVsZSBmb3IgJHtKU09OLnN0cmluZ2lmeShpbnB1dCl9YCk7Cn07CgoKY29uc3QgcGFyc2VyID0gdG9rZW5pemUgPT4gZnVuY3Rpb24gcGFyc2UoaW5wdXQsIGFzdCwgcGFyZW50cyA9IFtdKSB7CiAgaWYgKGlucHV0ID09PSAnJykgewogICAgcmV0dXJuIGFzdDsKICB9CgogIGNvbnN0IHsgdG9rZW4sIHR5cGUsIHJlc3QgfSA9IHRva2VuaXplKGlucHV0KTsKCiAgaWYgKHR5cGUgPT09ICdzcGFjZScpIHsKICAgIC8vIGRvIG5vdGhpbmcKICAgIHJldHVybiBwYXJzZShyZXN0LCBhc3QsIHBhcmVudHMpOwogIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3ZhcmlhYmxlJykgewogICAgYXN0LnB1c2godG9rZW4pOwogICAgcmV0dXJuIHBhcnNlKHJlc3QsIGFzdCwgcGFyZW50cyk7CiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykgewogICAgYXN0LnB1c2goTnVtYmVyKHRva2VuKSk7CiAgICByZXR1cm4gcGFyc2UocmVzdCwgYXN0LCBwYXJlbnRzKTsKICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICBhc3QucHVzaCh0b2tlbi5yZXBsYWNlKC8oXiJ8IiQpL2csICInIikpOwogICAgcmV0dXJuIHBhcnNlKHJlc3QsIGFzdCwgcGFyZW50cyk7CiAgfSBlbHNlIGlmICh0eXBlID09PSAnbFBhcmVuJykgewogICAgcGFyZW50cy5wdXNoKGFzdCkKICAgIHJldHVybiBwYXJzZShyZXN0LCBbXSwgcGFyZW50cykKICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyUGFyZW4nKSB7CiAgICBjb25zdCBwYXJlbnRBc3QgPSBwYXJlbnRzLnBvcCgpOwogICAgaWYgKHBhcmVudEFzdCkgewogICAgICBwYXJlbnRBc3QucHVzaChhc3QpOwogICAgICByZXR1cm4gcGFyc2UocmVzdCwgcGFyZW50QXN0LCBwYXJlbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcGFyc2UocmVzdCwgYXN0LCBwYXJlbnRzKTsKICB9CgogIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBwYXJzZSBsb2dpYyBmb3IgcnVsZSAke0pTT04uc3RyaW5naWZ5KHR5cGUpfWApOwp9Owo=" charset="utf-8"></script>
    <script src="data:application/javascript;base64,ZnVuY3Rpb24gZXZhbHVhdGUoZXhwLCBlbnYpIHsKICBpZiAoaXNfYXRvbShleHApKSB7CiAgICBpZiAoZXhwWzBdID09PSBgJ2ApIHsKICAgICAgcmV0dXJuIGV2YWx1YXRlKFsncXVvdGUnLCBleHAuc2xpY2UoMSldLCBlbnYpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbG9va3VwKGV4cCwgZW52KQogICAgfQogIH0gZWxzZSBpZiAoaXNfYXRvbShleHBbMF0pKSB7CiAgICBzd2l0Y2goZXhwWzBdKSB7CiAgICAgIGNhc2UgJ3F1b3RlJzogcmV0dXJuIHF1b3RlKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2F0b20nOiByZXR1cm4gYXRvbShleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdlcSc6IHJldHVybiBlcShleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdjYXInOiByZXR1cm4gY2FyKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2Nkcic6IHJldHVybiBjZHIoZXhwLCBlbnYpOyBicmVhazsKICAgICAgY2FzZSAnY29ucyc6IHJldHVybiBjb25zKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2NvbmQnOiByZXR1cm4gY29uZChleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdkZWZ1bic6IHJldHVybiBkZWZ1bihleHAsIGVudik7IGJyZWFrOwoKICAgICAgY2FzZSAnc2VsZWN0QWxsJzogcmV0dXJuIHNlbGVjdEFsbChleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdzZWxlY3RPbmUnOiByZXR1cm4gc2VsZWN0T25lKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFN0eWxlJzogcmV0dXJuIHNldFN0eWxlKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEludGVydmFsJzogcmV0dXJuIF9zZXRJbnRlcnZhbChleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdzZXRUaW1lb3V0JzogcmV0dXJuIF9zZXRUaW1lb3V0KGV4cCwgZW52KTsgYnJlYWs7CgogICAgICBkZWZhdWx0OiByZXR1cm4gY2FsbF9uYW1lZF9mbihleHAsIGVudik7CiAgICB9CiAgfSBlbHNlIGlmIChleHBbMF1bMF0gPT09ICJsYW1iZGEiKSB7CiAgICByZXR1cm4gYXBwbHkoZXhwLCBlbnYpCiAgfSBlbHNlIGlmIChleHBbMF1bMF0gPT09ICJsYWJlbCIpIHsKICAgIHJldHVybiBsYWJlbChleHAsIGVudikKICB9Cn0KCmZ1bmN0aW9uIHBhcnNlKHByb2dyYW0pIHsKICByZXR1cm4gcGFyc2VyKHRva2VuaXplcihydWxlcykpKHByb2dyYW0pCn0KCmZ1bmN0aW9uIHVucGFyc2UoKSB7CiAgbGV0IGFzdCA9IFsnc29tZXRoaW5nJywgWydzb21ldGhpbmcnLCAnZWxzZScsIFsnYW5kJywgWydtb3JlJ11dXV0KCn0KCmZ1bmN0aW9uIGludGVycHJldChwcm9ncmFtLCBlbnYpIHsKICBsZXQgYXN0ID0gcGFyc2UocHJvZ3JhbSkKICBsZXQgcmVzdWx0ID0gZXZhbHVhdGUoYXN0LCBlbnYgfHwgW10pCiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlc3VsdCkKfQoKZnVuY3Rpb24gemlwKCkgewogICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDg1NjcxNy9qYXZhc2NyaXB0LWVxdWl2YWxlbnQtb2YtcHl0aG9ucy16aXAtZnVuY3Rpb24KICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgdmFyIHNob3J0ZXN0ID0gYXJncy5sZW5ndGg9PTAgPyBbXSA6IGFyZ3MucmVkdWNlKGZ1bmN0aW9uKGEsYil7CiAgICAgICAgcmV0dXJuIGEubGVuZ3RoPGIubGVuZ3RoID8gYSA6IGIKICAgIH0pOwoKICAgIHJldHVybiBzaG9ydGVzdC5tYXAoZnVuY3Rpb24oXyxpKXsKICAgICAgICByZXR1cm4gYXJncy5tYXAoZnVuY3Rpb24oYXJyYXkpe3JldHVybiBhcnJheVtpXX0pCiAgICB9KTsKfQoKZnVuY3Rpb24gaXNfYXRvbShleHApIHsKICByZXR1cm4gdHlwZW9mIGV4cCA9PT0gJ3N0cmluZycKfQoKZnVuY3Rpb24gbG9va3VwKGF0b20sIGVudikgewogIGxldCBlbnRyeSA9IGVudi5maW5kKChbeCwgdmFsdWVdKSA9PiB4ID09PSBhdG9tKQogIGlmIChlbnRyeSkgewogICAgbGV0IFt4LCB2YWx1ZV0gPSBlbnRyeQogICAgcmV0dXJuIHZhbHVlCiAgfQp9CgpmdW5jdGlvbiBxdW90ZShleHApIHsKICAvLyAocXVvdGUgZTEpCiAgcmV0dXJuIGV4cFsxXQp9CgpmdW5jdGlvbiBhdG9tKGV4cCwgZW52KSB7CiAgLy8gKGF0b20gZTEpCiAgbGV0IHZhbCA9IGV2YWx1YXRlKGV4cFsxXSwgZW52KQogIHJldHVybiBpc19hdG9tKHZhbCkgPyAndCcgOiAnZicKfQoKZnVuY3Rpb24gZXEoZXhwLCBlbnYpIHsKICAvLyAoZXEgZTEgZTIpCiAgbGV0IHYxID0gZXZhbHVhdGUoZXhwWzFdLCBlbnYpCiAgbGV0IHYyID0gZXZhbHVhdGUoZXhwWzJdLCBlbnYpCiAgcmV0dXJuIChpc19hdG9tKHYxKSAmJiB2MSA9PSB2MikgPyAndCcgOiAnZicKfQoKZnVuY3Rpb24gY2FyKGV4cCwgZW52KSB7CiAgLy8gKGNhciBlMSkKICByZXR1cm4gZXZhbHVhdGUoZXhwWzFdLCBlbnYpWzBdCn0KCmZ1bmN0aW9uIGNkcihleHAsIGVudikgewogIC8vIChjZHIgZTEpCiAgbGV0IGxzdCA9IGV2YWx1YXRlKGV4cFsxXSwgZW52KQogIHJldHVybiAobHN0Lmxlbmd0aCA9PT0gMSkgPyAnbmlsJyA6IGxzdC5zbGljZSgxKQp9CgpmdW5jdGlvbiBjb25zKGV4cCwgZW52KSB7CiAgLy8gKGNvbnMgZTEgZTIpCiAgbGV0IHJlc3QgPSBldmFsdWF0ZShleHBbMl0sIGVudikKICBpZiAocmVzdCA9PT0gJ25pbCcpIHsKICAgIHJlc3QgPSBbXQogIH0KICByZXR1cm4gWyBldmFsdWF0ZShleHBbMV0sIGVudikgXS5jb25jYXQocmVzdCkKfQoKZnVuY3Rpb24gY29uZChleHAsIGVudikgewogIGxldCBlbnRyaWVzID0gZXhwLnNsaWNlKDEpCiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICBsZXQgWyBwLCBlIF0gPSBlbnRyaWVzW2ldCiAgICBpZiAoZXZhbHVhdGUocCwgZW52KSA9PT0gJ3QnKSB7CiAgICAgIHJldHVybiBldmFsdWF0ZShlLCBlbnYpCiAgICB9CiAgfQp9CgpmdW5jdGlvbiBkZWZ1bihleHAsIGVudikgewogIC8vIChkZWZ1biBteS1mdW4gKGExIC4uLikgYm9keSkKICBsZXQgWyBuYW1lLCBwYXJhbXMsIGJvZHkgXSA9IGV4cC5zbGljZSgxKQogIGxldCBsYWJlbCA9IFsgImxhYmVsIiwgbmFtZSwgWyAibGFtYmRhIiwgcGFyYW1zLCBib2R5IF0gXQogIGVudi5wdXNoKFtuYW1lLCBsYWJlbF0pCiAgcmV0dXJuIG5hbWUKfQoKZnVuY3Rpb24gY2FsbF9uYW1lZF9mbihleHAsIGVudikgewogIC8vIChteS1mdW4gZTEg4oCmKQogIGxldCBmbiA9IGxvb2t1cChleHBbMF0sIGVudikKICByZXR1cm4gZXZhbHVhdGUoW2ZuXS5jb25jYXQoZXhwLnNsaWNlKDEpKSwgZW52KQp9CgpmdW5jdGlvbiBhcHBseShleHAsIGVudikgewogIC8vICgobGFtYmRhIChhMSDigKYpIGJvZHkpIGUxIOKApikKICBsZXQgZm4gPSBleHBbMF0KICBsZXQgYXJncyA9IGV4cC5zbGljZSgxKQogIGxldCBbIF8sIHBhcmFtcywgYm9keSBdID0gZm4KICBsZXQgZXZhbHVhdGVkX2FyZ3MgPSBhcmdzLm1hcCgoZSkgPT4gZXZhbHVhdGUoZSwgZW52KSkKICBsZXQgbmV3X2VudiA9IHppcChwYXJhbXMsIGV2YWx1YXRlZF9hcmdzKQogIG5ld19lbnYgPSBuZXdfZW52LmNvbmNhdChlbnYpCiAgcmV0dXJuIGV2YWx1YXRlKGJvZHksIG5ld19lbnYpCn0KCmZ1bmN0aW9uIGxhYmVsKGUsIGEpIHsKICAvLyAoKGxhYmVsIG5hbWUgKGxhbWJkYSAocDEg4oCmKSBib2R5KSkgYXJnMSDigKYpCiAgWyBfLCBmLCBmbiBdID0gZVswXQogIGFyZ3MgPSBlLnNsaWNlKDEpCiAgcmV0dXJuIGV2YWx1YXRlKFtmbl0uY29uY2F0KGFyZ3MpLCBbKGYsIGVbMF0pXS5jb25jYXQoYSkpCn0KCi8vID09PT09CgpmdW5jdGlvbiBzZWxlY3RBbGwoZXhwLCBlbnYpIHsKICAvLyAoc2VsZWN0QWxsIGNzc1F1ZXJ5KQogIHJldHVybiBBcnJheS5mcm9tKAogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgKICAgICAgZXZhbHVhdGUoZXhwWzFdLCBlbnYpCiAgICApCiAgKQp9CgpmdW5jdGlvbiBzZWxlY3RPbmUoZXhwLCBlbnYpIHsKICAvLyAoc2VsZWN0T25lIGNzc1F1ZXJ5KQogIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgZXZhbHVhdGUoZXhwWzFdLCBlbnYpCiAgKQp9CgpmdW5jdGlvbiBzZXRTdHlsZShleHAsIGVudikgewogIC8vIChzZWxlY3RBbGwgc2VsZWN0IChrZXkgdmFsdWUpKQogIGxldCBbIGtleSwgdmFsdWUgXSA9IGV4cFsyXQogIGxldCBrID0gZXZhbHVhdGUoa2V5LCBlbnYpCiAgbGV0IHYgPSBldmFsdWF0ZSh2YWx1ZSwgZW52KQogIGlmICh2KSB7CiAgICB2ID0gdi5yZXBsYWNlKC9fL2csICcgJykKICB9CiAgc3dpdGNoKGV4cFsxXVswXSkgewogICAgY2FzZSAnc2VsZWN0QWxsJzoKICAgICAgbGV0IGVsZW1lbnRzID0gZXZhbHVhdGUoZXhwWzFdLCBlbnYpCiAgICAgIGVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7CiAgICAgICAgZWwuc3R5bGVba10gPSB2CiAgICAgIH0pCiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoZWwgPT4gZWwuaWQgfHwgZWwudGFnTmFtZSkKICAgIGJyZWFrOwogICAgY2FzZSAnc2VsZWN0T25lJzoKICAgICAgbGV0IGVsID0gZXZhbHVhdGUoZXhwWzFdLCBlbnYpCiAgICAgIGVsLnN0eWxlW2tdID0gdgogICAgICByZXR1cm4gZWwuaWQgfHwgZWwudGFnTmFtZQogICAgYnJlYWs7CiAgfQp9CgpmdW5jdGlvbiBfc2V0SW50ZXJ2YWwoZXhwLCBlbnYpIHsKICAvLyAoc2V0SW50ZXJ2YWwgbGFtYmRhIGludGVydmFsX21zKQogIHJldHVybiBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBldmFsdWF0ZShleHBbMV0sIGVudikKICB9LCBleHBbMl0pCn0KCmZ1bmN0aW9uIF9zZXRUaW1lb3V0KGV4cCwgZW52KSB7CiAgLy8gKHNldFRpbWVvdXQgbGFtYmRhIGludGVydmFsX21zKQogIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHsKICAgIGV2YWx1YXRlKGV4cFsxXSwgZW52KQogIH0sIGV4cFsyXSkKfQo=" charset="utf-8"></script>
    <script type="text/javascript">
      function run() {
        output.innerHTML = ``
        let textarea = document.querySelector('textarea')
        let env = []
        let expressions = textarea.value.split(';')
        expressions = expressions.filter((program) => !!program.trim())

        expressions.forEach((program) => {
          let result = interpret(program, env)
          let output = document.querySelector('#output')
          output.innerHTML += `<pre>${result}</pre>`
        })

      }
    </script>
  </head>
  <body>
    <button onclick="run()">RUN</button>
    <textarea name="name">(setStyle (selectAll '*) ('border 'none));
(setStyle (selectAll '*) ('transition 'all_1s));
(setStyle (selectOne 'body) ('background 'purple));
(setStyle (selectOne 'body) ('color 'pink));
(setStyle (selectOne 'textarea) ('background 'black));
(setStyle (selectOne 'textarea) ('color 'white));
(setTimeout ( (lambda () (setStyle (selectOne 'button) ('color 'purple)) ) 'nil ) 500);
(setTimeout ( (lambda () (setStyle (selectOne 'button) ('background 'pink)) ) 'nil ) 1000);</textarea>
    <div id="output"></div>
  

</body></html>
