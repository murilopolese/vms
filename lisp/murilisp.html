<!-- Saved from local source at 2022-07-27T19:10:13Z using monolith v2.6.1 -->
<!DOCTYPE html><html lang="en" dir="ltr"><head>
    <meta charset="utf-8">
    <title>MURILISP</title>
    <style media="screen">
      * {
        box-sizing: border-box;
      }
      html, body {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
        display: flex;
        flex-direction: column;
      }
      textarea {
        width: 100%;
        height: 80%;
        outline: none;
      }
    </style>
    <script src="data:application/javascript;base64,Ly8gQkFCWSBMSVNQRVI6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2FpdG9yb3Nlcy9hMDAyMDAwNWM2YjMxNzg2NGRhNDE2YTI3MGJmOTIxNwpjb25zdCBydWxlcyA9IFsKICB7IHR5cGU6ICdzcGFjZScsIHJlZ2V4OiAvXlxzLyB9LAogIHsgdHlwZTogJ2xQYXJlbicsIHJlZ2V4OiAvXlwoLyB9LAogIHsgdHlwZTogJ3JQYXJlbicsIHJlZ2V4OiAvXlwpLyB9LAogIHsgdHlwZTogJ251bWJlcicsIHJlZ2V4OiAvXlswLTlcLl0rLyB9LAogIHsgdHlwZTogJ3N0cmluZycsIHJlZ2V4OiAvXiIuKj8iLyB9LAogIHsgdHlwZTogJ3ZhcmlhYmxlJywgcmVnZXg6IC9eW15cc1woXCldKy8gfSAvLyB0YWtlIGZyb20gdGhlIGJlZ2lubmluZyAxKyBjaGFyYWN0ZXJzIHVudGlsIHlvdSBoaXQgYSAnICcsICcoJywgb3IgJyknIC8vIFRPRE8gLSBzdXBwb3J0IGVzY2FwZWQgZG91YmxlIHF1b3RlCl07CgoKY29uc3QgdG9rZW5pemVyID0gcnVsZXMgPT4gaW5wdXQgPT4gewogIGZvciAobGV0IGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgIGxldCB0b2tlbml6ZWQgPSBydWxlc1tpXS5yZWdleC5leGVjKGlucHV0KTsKICAgIGlmICh0b2tlbml6ZWQpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b2tlbjogdG9rZW5pemVkWzBdLAogICAgICAgIHR5cGU6IHJ1bGVzW2ldLnR5cGUsCiAgICAgICAgcmVzdDogaW5wdXQuc2xpY2UodG9rZW5pemVkWzBdLmxlbmd0aCkKICAgICAgfTsKICAgIH0KICB9CgogIHRocm93IG5ldyBFcnJvcihgbm8gbWF0Y2hpbmcgdG9rZW5pemUgcnVsZSBmb3IgJHtKU09OLnN0cmluZ2lmeShpbnB1dCl9YCk7Cn07CgoKY29uc3QgcGFyc2VyID0gdG9rZW5pemUgPT4gZnVuY3Rpb24gcGFyc2UoaW5wdXQsIGFzdCwgcGFyZW50cyA9IFtdKSB7CiAgaWYgKGlucHV0ID09PSAnJykgewogICAgcmV0dXJuIGFzdDsKICB9CgogIGNvbnN0IHsgdG9rZW4sIHR5cGUsIHJlc3QgfSA9IHRva2VuaXplKGlucHV0KTsKCiAgaWYgKHR5cGUgPT09ICdzcGFjZScpIHsKICAgIC8vIGRvIG5vdGhpbmcKICAgIHJldHVybiBwYXJzZShyZXN0LCBhc3QsIHBhcmVudHMpOwogIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3ZhcmlhYmxlJykgewogICAgYXN0LnB1c2godG9rZW4pOwogICAgcmV0dXJuIHBhcnNlKHJlc3QsIGFzdCwgcGFyZW50cyk7CiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykgewogICAgYXN0LnB1c2goTnVtYmVyKHRva2VuKSk7CiAgICByZXR1cm4gcGFyc2UocmVzdCwgYXN0LCBwYXJlbnRzKTsKICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICBhc3QucHVzaCh0b2tlbi5yZXBsYWNlKC8oXiJ8IiQpL2csICInIikpOwogICAgcmV0dXJuIHBhcnNlKHJlc3QsIGFzdCwgcGFyZW50cyk7CiAgfSBlbHNlIGlmICh0eXBlID09PSAnbFBhcmVuJykgewogICAgcGFyZW50cy5wdXNoKGFzdCkKICAgIHJldHVybiBwYXJzZShyZXN0LCBbXSwgcGFyZW50cykKICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyUGFyZW4nKSB7CiAgICBjb25zdCBwYXJlbnRBc3QgPSBwYXJlbnRzLnBvcCgpOwogICAgaWYgKHBhcmVudEFzdCkgewogICAgICBwYXJlbnRBc3QucHVzaChhc3QpOwogICAgICByZXR1cm4gcGFyc2UocmVzdCwgcGFyZW50QXN0LCBwYXJlbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcGFyc2UocmVzdCwgYXN0LCBwYXJlbnRzKTsKICB9CgogIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBwYXJzZSBsb2dpYyBmb3IgcnVsZSAke0pTT04uc3RyaW5naWZ5KHR5cGUpfWApOwp9Owo=" charset="utf-8"></script>
    <script src="data:application/javascript;base64,ZnVuY3Rpb24gZXZhbHVhdGUoZXhwLCBlbnYpIHsKICBpZiAoaXNfYXRvbShleHApKSB7CiAgICByZXR1cm4gbG9va3VwKGV4cCwgZW52KQogIH0gZWxzZSBpZiAoaXNfYXRvbShleHBbMF0pKSB7CiAgICBzd2l0Y2goZXhwWzBdKSB7CiAgICAgIGNhc2UgJ3F1b3RlJzogcmV0dXJuIHF1b3RlKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2F0b20nOiByZXR1cm4gYXRvbShleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdlcSc6IHJldHVybiBlcShleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdjYXInOiByZXR1cm4gY2FyKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2Nkcic6IHJldHVybiBjZHIoZXhwLCBlbnYpOyBicmVhazsKICAgICAgY2FzZSAnY29ucyc6IHJldHVybiBjb25zKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ2NvbmQnOiByZXR1cm4gY29uZChleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdkZWZ1bic6IHJldHVybiBkZWZ1bihleHAsIGVudik7IGJyZWFrOwoKICAgICAgY2FzZSAnc2VsZWN0QWxsJzogcmV0dXJuIHNlbGVjdEFsbChleHAsIGVudik7IGJyZWFrOwogICAgICBjYXNlICdzZWxlY3RPbmUnOiByZXR1cm4gc2VsZWN0T25lKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFN0eWxlJzogcmV0dXJuIHNldFN0eWxlKGV4cCwgZW52KTsgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEludGVydmFsJzogcmV0dXJuIF9zZXRJbnRlcnZhbChleHAsIGVudik7IGJyZWFrOwoKICAgICAgZGVmYXVsdDogcmV0dXJuIGNhbGxfbmFtZWRfZm4oZXhwLCBlbnYpOwogICAgfQogIH0gZWxzZSBpZiAoZXhwWzBdWzBdID09PSAibGFtYmRhIikgewogICAgcmV0dXJuIGFwcGx5KGV4cCwgZW52KQogIH0gZWxzZSBpZiAoZXhwWzBdWzBdID09PSAibGFiZWwiKSB7CiAgICByZXR1cm4gbGFiZWwoZXhwLCBlbnYpCiAgfQp9CgpmdW5jdGlvbiBwYXJzZShwcm9ncmFtKSB7CiAgcmV0dXJuIHBhcnNlcih0b2tlbml6ZXIocnVsZXMpKShwcm9ncmFtKQp9CgpmdW5jdGlvbiB1bnBhcnNlKCkgewogIGxldCBhc3QgPSBbJ3NvbWV0aGluZycsIFsnc29tZXRoaW5nJywgJ2Vsc2UnLCBbJ2FuZCcsIFsnbW9yZSddXV1dCgp9CgpmdW5jdGlvbiBpbnRlcnByZXQocHJvZ3JhbSwgZW52KSB7CiAgbGV0IGFzdCA9IHBhcnNlKHByb2dyYW0pCiAgbGV0IHJlc3VsdCA9IGV2YWx1YXRlKGFzdCwgZW52IHx8IFtdKQogIHJldHVybiBKU09OLnN0cmluZ2lmeShyZXN1bHQpCn0KCmZ1bmN0aW9uIHppcCgpIHsKICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ4NTY3MTcvamF2YXNjcmlwdC1lcXVpdmFsZW50LW9mLXB5dGhvbnMtemlwLWZ1bmN0aW9uCiAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgIHZhciBzaG9ydGVzdCA9IGFyZ3MubGVuZ3RoPT0wID8gW10gOiBhcmdzLnJlZHVjZShmdW5jdGlvbihhLGIpewogICAgICAgIHJldHVybiBhLmxlbmd0aDxiLmxlbmd0aCA/IGEgOiBiCiAgICB9KTsKCiAgICByZXR1cm4gc2hvcnRlc3QubWFwKGZ1bmN0aW9uKF8saSl7CiAgICAgICAgcmV0dXJuIGFyZ3MubWFwKGZ1bmN0aW9uKGFycmF5KXtyZXR1cm4gYXJyYXlbaV19KQogICAgfSk7Cn0KCmZ1bmN0aW9uIGlzX2F0b20oZXhwKSB7CiAgcmV0dXJuIHR5cGVvZiBleHAgPT09ICdzdHJpbmcnCn0KCmZ1bmN0aW9uIGxvb2t1cChhdG9tLCBlbnYpIHsKICBsZXQgZW50cnkgPSBlbnYuZmluZCgoW3gsIHZhbHVlXSkgPT4geCA9PT0gYXRvbSkKICBpZiAoZW50cnkpIHsKICAgIGxldCBbeCwgdmFsdWVdID0gZW50cnkKICAgIHJldHVybiB2YWx1ZQogIH0KfQoKZnVuY3Rpb24gcXVvdGUoZXhwKSB7CiAgLy8gKHF1b3RlIGUxKQogIHJldHVybiBleHBbMV0KfQoKZnVuY3Rpb24gYXRvbShleHAsIGVudikgewogIC8vIChhdG9tIGUxKQogIGxldCB2YWwgPSBldmFsdWF0ZShleHBbMV0sIGVudikKICByZXR1cm4gaXNfYXRvbSh2YWwpID8gJ3QnIDogJ2YnCn0KCmZ1bmN0aW9uIGVxKGV4cCwgZW52KSB7CiAgLy8gKGVxIGUxIGUyKQogIGxldCB2MSA9IGV2YWx1YXRlKGV4cFsxXSwgZW52KQogIGxldCB2MiA9IGV2YWx1YXRlKGV4cFsyXSwgZW52KQogIHJldHVybiAoaXNfYXRvbSh2MSkgJiYgdjEgPT0gdjIpID8gJ3QnIDogJ2YnCn0KCmZ1bmN0aW9uIGNhcihleHAsIGVudikgewogIC8vIChjYXIgZTEpCiAgcmV0dXJuIGV2YWx1YXRlKGV4cFsxXSwgZW52KVswXQp9CgpmdW5jdGlvbiBjZHIoZXhwLCBlbnYpIHsKICAvLyAoY2RyIGUxKQogIGxldCBsc3QgPSBldmFsdWF0ZShleHBbMV0sIGVudikKICByZXR1cm4gKGxzdC5sZW5ndGggPT09IDEpID8gJ25pbCcgOiBsc3Quc2xpY2UoMSkKfQoKZnVuY3Rpb24gY29ucyhleHAsIGVudikgewogIC8vIChjb25zIGUxIGUyKQogIGxldCByZXN0ID0gZXZhbHVhdGUoZXhwWzJdLCBlbnYpCiAgaWYgKHJlc3QgPT09ICduaWwnKSB7CiAgICByZXN0ID0gW10KICB9CiAgcmV0dXJuIFsgZXZhbHVhdGUoZXhwWzFdLCBlbnYpIF0uY29uY2F0KHJlc3QpCn0KCmZ1bmN0aW9uIGNvbmQoZXhwLCBlbnYpIHsKICBsZXQgZW50cmllcyA9IGV4cC5zbGljZSgxKQogIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykgewogICAgbGV0IFsgcCwgZSBdID0gZW50cmllc1tpXQogICAgaWYgKGV2YWx1YXRlKHAsIGVudikgPT09ICd0JykgewogICAgICByZXR1cm4gZXZhbHVhdGUoZSwgZW52KQogICAgfQogIH0KfQoKZnVuY3Rpb24gZGVmdW4oZXhwLCBlbnYpIHsKICAvLyAoZGVmdW4gbXktZnVuIChhMSAuLi4pIGJvZHkpCiAgbGV0IFsgbmFtZSwgcGFyYW1zLCBib2R5IF0gPSBleHAuc2xpY2UoMSkKICBsZXQgbGFiZWwgPSBbICJsYWJlbCIsIG5hbWUsIFsgImxhbWJkYSIsIHBhcmFtcywgYm9keSBdIF0KICBlbnYucHVzaChbbmFtZSwgbGFiZWxdKQogIHJldHVybiBuYW1lCn0KCmZ1bmN0aW9uIGNhbGxfbmFtZWRfZm4oZXhwLCBlbnYpIHsKICAvLyAobXktZnVuIGUxIOKApikKICBsZXQgZm4gPSBsb29rdXAoZXhwWzBdLCBlbnYpCiAgcmV0dXJuIGV2YWx1YXRlKFtmbl0uY29uY2F0KGV4cC5zbGljZSgxKSksIGVudikKfQoKZnVuY3Rpb24gYXBwbHkoZXhwLCBlbnYpIHsKICAvLyAoKGxhbWJkYSAoYTEg4oCmKSBib2R5KSBlMSDigKYpCiAgbGV0IGZuID0gZXhwWzBdCiAgbGV0IGFyZ3MgPSBleHAuc2xpY2UoMSkKICBsZXQgWyBfLCBwYXJhbXMsIGJvZHkgXSA9IGZuCiAgbGV0IGV2YWx1YXRlZF9hcmdzID0gYXJncy5tYXAoKGUpID0+IGV2YWx1YXRlKGUsIGVudikpCiAgbGV0IG5ld19lbnYgPSB6aXAocGFyYW1zLCBldmFsdWF0ZWRfYXJncykKICBuZXdfZW52ID0gbmV3X2Vudi5jb25jYXQoZW52KQogIHJldHVybiBldmFsdWF0ZShib2R5LCBuZXdfZW52KQp9CgpmdW5jdGlvbiBsYWJlbChlLCBhKSB7CiAgLy8gKChsYWJlbCBuYW1lIChsYW1iZGEgKHAxIOKApikgYm9keSkpIGFyZzEg4oCmKQogIFsgXywgZiwgZm4gXSA9IGVbMF0KICBhcmdzID0gZS5zbGljZSgxKQogIHJldHVybiBldmFsdWF0ZShbZm5dLmNvbmNhdChhcmdzKSwgWyhmLCBlWzBdKV0uY29uY2F0KGEpKQp9CgovLyA9PT09PQoKZnVuY3Rpb24gc2VsZWN0QWxsKGV4cCwgZW52KSB7CiAgLy8gKHNlbGVjdEFsbCBjc3NRdWVyeSkKICByZXR1cm4gQXJyYXkuZnJvbSggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChleHBbMV0pICkKfQoKZnVuY3Rpb24gc2VsZWN0T25lKGV4cCwgZW52KSB7CiAgLy8gKHNlbGVjdE9uZSBjc3NRdWVyeSkKICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihleHBbMV0pCn0KCmZ1bmN0aW9uIHNldFN0eWxlKGV4cCwgZW52KSB7CiAgLy8gKHNlbGVjdEFsbCBzZWxlY3QgKGtleSB2YWx1ZSkpCiAgbGV0IFsga2V5LCB2YWx1ZSBdID0gZXhwWzJdCiAgbGV0IGsgPSBldmFsdWF0ZShrZXksIGVudikKICBsZXQgdiA9IGV2YWx1YXRlKHZhbHVlLCBlbnYpCiAgaWYgKHYpIHsKICAgIHYgPSB2LnJlcGxhY2UoL18vZywgJyAnKQogIH0KICBzd2l0Y2goZXhwWzFdWzBdKSB7CiAgICBjYXNlICdzZWxlY3RBbGwnOgogICAgICBsZXQgZWxlbWVudHMgPSBldmFsdWF0ZShleHBbMV0sIGVudikKICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHsKICAgICAgICBlbC5zdHlsZVtrXSA9IHYKICAgICAgICBjb25zb2xlLmxvZyhlbC5zdHlsZVtrXSkKICAgICAgfSkKICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcChlbCA9PiBlbC5pZCB8fCBlbC50YWdOYW1lKQogICAgYnJlYWs7CiAgICBjYXNlICdzZWxlY3RPbmUnOgogICAgICBsZXQgZWwgPSBldmFsdWF0ZShleHBbMV0sIGVudikKICAgICAgZWwuc3R5bGVba10gPSB2CiAgICAgIGNvbnNvbGUubG9nKGVsLnN0eWxlW2tdKQogICAgICByZXR1cm4gZWwuaWQgfHwgZWwudGFnTmFtZQogICAgYnJlYWs7CiAgfQp9CgpmdW5jdGlvbiBfc2V0SW50ZXJ2YWwoZXhwLCBlbnYpIHsKICAvLyAoc2V0SW50ZXJ2YWwgbGFtYmRhIGludGVydmFsX21zKQogIHJldHVybiBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICBldmFsdWF0ZShleHBbMV0sIGVudikKICB9LCBleHBbMl0pCn0K" charset="utf-8"></script>
    <script type="text/javascript">
      function run() {
        output.innerHTML = ``
        let textarea = document.querySelector('textarea')
        let env = []
        let expressions = textarea.value.split(';')
        expressions = expressions.filter((program) => !!program.trim())

        expressions.forEach((program) => {
          let result = interpret(program, env)
          let output = document.querySelector('#output')
          output.innerHTML += `<pre>${result}</pre>`
        })

      }
    </script>
  </head>
  <body>
    <button onclick="run()">RUN</button>
    <textarea name="name">(
setStyle
(selectAll (quote *))
((quote border) (quote none))
);

(
setStyle
(selectAll (quote *))
((quote transition) (quote all_1s))
);

(
setStyle
(selectOne (quote body))
((quote background) (quote purple))
);

(
setStyle
(selectOne (quote body))
((quote color) (quote pink))
);

(
setStyle
(selectOne (quote textarea))
((quote color) (quote white))
);


(
setStyle
(selectOne (quote textarea))
((quote background) (quote black))
);



</textarea>
    <div id="output"></div>


</body></html>
